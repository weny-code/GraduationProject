{"version":3,"sources":["webpack:///E:/Users/yu/Documents/HBuilderProjects/GraduationProject/components/identityList/identityList.vue?ecb9","webpack:///E:/Users/yu/Documents/HBuilderProjects/GraduationProject/components/identityList/identityList.vue?bf4c","webpack:///E:/Users/yu/Documents/HBuilderProjects/GraduationProject/components/identityList/identityList.vue?c0b4","webpack:///E:/Users/yu/Documents/HBuilderProjects/GraduationProject/components/identityList/identityList.vue?0b95","uni-app:///components/identityList/identityList.vue","webpack:///E:/Users/yu/Documents/HBuilderProjects/GraduationProject/components/identityList/identityList.vue?363b"],"names":["renderjs","component","options","__file","components","uMask","uAvatar","uLine","e","message","indexOf","console","error","render","_vm","this","_h","$createElement","_self","_c","recyclableRender","staticRenderFns","_withStripped"],"mappings":";;;;2DAAA,kUACIA,EADJ,+KASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,WACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,2CACZ,aAAAF,E;;;;2GCvBf,yrC;;;;2GCAA,IAAIG,EAAJ,0LACA,IACEA,EAAa,CACXC,MAAO,WACL,OAAO,0LAITC,QAAS,WACP,OAAO,sMAITC,MAAO,WACL,OAAO,2LAKX,MAAOC,GACP,IAC+C,IAA7CA,EAAEC,QAAQC,QAAQ,wBACa,IAA/BF,EAAEC,QAAQC,QAAQ,QAWlB,MAAMF,EATNG,QAAQC,MAAMJ,EAAEC,SAChBE,QAAQC,MAAM,mBACdD,QAAQC,MACN,uFAEFD,QAAQC,MACN,mDAMN,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eACJH,EAAII,MAAMC,IAEjBC,GAAmB,EACnBC,EAAkB,GACtBR,EAAOS,eAAgB,G;;;;2DC3CvB,myBAA4uB,eAAG,G;;;;2MC2C/uB,mB,+tCAKA,CACA,oBACA,YACA,WAEA,KALA,WAMA,OACA,eACA,eACA,aACA,WACA,UAGA,eACA,sEAEA,QAjBA,WAkBA,oBACA,uBAEA,gBACA,mEADA,IAEA,aAFA,WAGA,8BACA,qDAEA,GADA,4BACA,gDACA,kBACA,kBACA,wCACA,MAEA,oBAKA,eAjBA,WAiBA,wIACA,IACA,eAFA,SAGA,kCACA,iCACA,kCACA,uBACA,wBACA,qBACA,wCACA,8BACA,wDACA,+CACA,kEACA,GACA,oCACA,2DAIA,yCACA,UACA,0BACA,mBACA,kBAxBA,8CA2BA,OA5CA,SA4CA,KACA,eACA,cACA,WACA,cAEA,4CACA,aACA,mBACA,QAFA,WAGA,qBAEA,KALA,WAMA,qBAEA,SARA,WASA,2B;;;;2DCjIA,m5CAAq2C,eAAG,G","file":"components/identityList/identityList.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./identityList.vue?vue&type=template&id=6047f704&scoped=true&\"\nvar renderjs\nimport script from \"./identityList.vue?vue&type=script&lang=js&\"\nexport * from \"./identityList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./identityList.vue?vue&type=style&index=0&id=6047f704&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6047f704\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/identityList/identityList.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./identityList.vue?vue&type=template&id=6047f704&scoped=true&\"","var components\ntry {\n  components = {\n    uMask: function() {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-mask/u-mask\" */ \"uview-ui/components/u-mask/u-mask.vue\"\n      )\n    },\n    uAvatar: function() {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-avatar/u-avatar\" */ \"uview-ui/components/u-avatar/u-avatar.vue\"\n      )\n    },\n    uLine: function() {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-line/u-line\" */ \"uview-ui/components/u-line/u-line.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./identityList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./identityList.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"\">\r\n\t\t<u-mask :show=\"show\" :mask-click-able=\"false\">\r\n\t\t\t<view v-if=\"show\" class=\"loading\">\r\n\t\t\t\t<Loading text=\"加载中..\" :mask=\"true\" click=\"true\" ref=\"loading\"></Loading>\r\n\t\t\t</view>\r\n\t\t</u-mask>\r\n\t\t<view class=\"card\">\r\n\t\t\t<view class=\"title\">\r\n\t\t\t\t<text>请选择您要使用的身份</text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"list\">\r\n\t\t\t\t<view @click=\"goHome(teacherName,'老师')\" v-if=\"isTeacher\" class=\"item\">\r\n\t\t\t\t\t<view hover-class=\"hover\" class=\"content flex\" style=\"margin-top: 0;\">\r\n\t\t\t\t\t\t<u-avatar size=\"70\" src=\"/static/img/teacher.png\"></u-avatar>\r\n\t\t\t\t\t\t<view class=\"name\">\r\n\t\t\t\t\t\t\t{{teacherName}}老师\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"tea-iden\">\r\n\t\t\t\t\t\t\t<text>老师</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\t\r\n\t\t\t\t<view class=\"item\" v-for=\"(res,index) in stuList\" :key=\"index\" @click=\"goHome(res,'学生')\">\r\n\t\t\t\t\t<u-line color=\"#ff9900\" />\r\n\t\t\t\t\t<view hover-class=\"hover\" class=\"content flex\">\r\n\t\t\t\t\t\t<u-avatar size=\"70\" src=\"/static/img/student.png\"></u-avatar>\r\n\t\t\t\t\t\t<view class=\"name\">\r\n\t\t\t\t\t\t\t{{res}}同学\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"stu-iden\">\r\n\t\t\t\t\t\t\t<text>学生</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tmapState,\r\n\t\tmapMutations\r\n\t} from 'vuex'\r\n\timport Loading from \"@/components/loading.vue\";\r\n\texport default {\r\n\t\tname: \"identityList\",\r\n\t\tcomponents: {\r\n\t\t\tLoading\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tcurrentName: \"\",\r\n\t\t\t\tteacherName: \"\",\r\n\t\t\t\tisTeacher: false,\r\n\t\t\t\tstuList: [],\r\n\t\t\t\tshow:true\r\n\t\t\t};\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t...mapState(['uid', 'currentRole', 'hasLogin', 'userInfo', 'hasAuth'])\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.checkTeacher()\r\n\t\t\tthis.getStuNameList()\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t...mapMutations([\"setID\", \"setRole\", \"login\", \"logout\", \"getAuth\"]),\r\n\t\t\tcheckTeacher() {\r\n\t\t\t\tif(this.userInfo.joined_class){\r\n\t\t\t\t\tfor (let i = 0; i < this.userInfo.joined_class.length; i++) {\r\n\t\t\t\t\t\tconsole.log(this.isTeacher)\r\n\t\t\t\t\t\tif (this.userInfo.joined_class[i].class_role == '老师') {\r\n\t\t\t\t\t\t\tconsole.log(\"老师\")\r\n\t\t\t\t\t\t\tthis.isTeacher = true\r\n\t\t\t\t\t\t\tthis.teacherName = this.userInfo.nickname\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tthis.isTeacher = false\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync getStuNameList() {\r\n\t\t\t\tvar _this = this;\r\n\t\t\t\tconst db = uniCloud.database()\r\n\t\t\t\tawait db.collection('class-list').where({\r\n\t\t\t\t\t\t'class_members.members_id': this.uid,\r\n\t\t\t\t\t\t'class_members.class_role': \"学生\"\r\n\t\t\t\t\t}).field('class_members') // 注意distinct方法没有参数\r\n\t\t\t\t\t.get().then((res => {\r\n\t\t\t\t\t\tconsole.log(\"???\", res)\r\n\t\t\t\t\t\tfor (let i = 0; i < res.result.data.length; i++) {\r\n\t\t\t\t\t\t\tconsole.log(res.result.data[i])\r\n\t\t\t\t\t\t\tfor (let j = 1; j < res.result.data[i].class_members.length; j++) {\r\n\t\t\t\t\t\t\t\tconsole.log(res.result.data[i].class_members[j])\r\n\t\t\t\t\t\t\t\tif (res.result.data[i].class_members[j].class_role == '学生' && res.result.data[\r\n\t\t\t\t\t\t\t\t\t\ti]\r\n\t\t\t\t\t\t\t\t\t.class_members[j].members_id == _this.uid) {\r\n\t\t\t\t\t\t\t\t\tthis.stuList.push(res.result.data[i].class_members[j].username)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.stuList = Array.from(new Set(this.stuList))\r\n\t\t\t\t\t\tthis.show = false\r\n\t\t\t\t\t\tconsole.log(this.stuList)\r\n\t\t\t\t\t})).catch((err) => {\r\n\t\t\t\t\t\tconsole.log(err)\r\n\t\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgoHome(res, role) {\r\n\t\t\t\tconsole.log(res)\r\n\t\t\t\tthis.setRole({\r\n\t\t\t\t\tusername: res,\r\n\t\t\t\t\tclassRole: role,\r\n\t\t\t\t})\r\n\t\t\t\tconsole.log(\"currenrRole\",this.currentRole)\r\n\t\t\t\tuni.switchTab({\r\n\t\t\t\t\turl: '../home/home',\r\n\t\t\t\t\tsuccess() {\r\n\t\t\t\t\t\tconsole.log(\"跳转成功\")\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail() {\r\n\t\t\t\t\t\tconsole.log(\"跳转失败\")\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcomplete() {\r\n\t\t\t\t\t\tconsole.log(\"跳转完成\")\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t.flex {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: flex-start;\r\n\t\talign-items: center;\r\n\t}\r\n\t\r\n\t.loading {\r\n\t\tposition: fixed;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\theight: 150rpx;\r\n\t\twidth: 150rpx;\r\n\t\tleft: 50%;\r\n\t\ttop: 50%;\r\n\t\tmargin-top: -75rpx;\r\n\t\tmargin-left: -75rpx;\r\n\t\tborder: 1px solid rgba(255, 255, 255, 0.1);\r\n\t\tborder-radius: 10upx;\r\n\t\tbackground: #040038;\r\n\t\tz-index: 999;\r\n\t}\r\n\r\n\t.card {\r\n\t\t// width: 710rpx;\r\n\t\tbackground-color: #ffffff;\r\n\t\tmargin: 20rpx;\r\n\t\tborder-radius: 10rpx;\r\n\t\tbox-shadow: 0 0 20upx 0 rgba(0, 0, 0, 0.10);\r\n\t\tbox-sizing: border-box;\r\n\t\toverflow: hidden;\r\n\t\tpadding: 20rpx;\r\n\r\n\t\t.title {\r\n\t\t\tpadding: 10rpx;\r\n\t\t\tfont-size: 20px;\r\n\t\t\tfont-weight: bold;\r\n\t\t\tmargin-bottom: 20rpx;\r\n\t\t}\r\n\r\n\t\t.list {\r\n\t\t\tpadding: 10rpx;\r\n\r\n\t\t\t.item {\r\n\t\t\t\tpadding: 10rpx;\r\n\t\t\t\t.content {\r\n\t\t\t\t\tmargin-top: 20rpx;\r\n\t\t\t\t\tpadding: 20rpx 10rpx;\r\n\t\t\t\t\t.name {\r\n\t\t\t\t\t\tmargin-left: 20rpx;\r\n\t\t\t\t\t\tfont-size: 16px;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.tea-iden {\r\n\t\t\t\t\t\tbackground: #ffaa7f;\r\n\t\t\t\t\t\tcolor: #ff5500;\r\n\t\t\t\t\t\tfont-size: 10px;\r\n\t\t\t\t\t\tpadding: 6rpx 12rpx;\r\n\t\t\t\t\t\tmargin-left: 20rpx;\r\n\t\t\t\t\t\t// padding: 10rpx;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.stu-iden {\r\n\t\t\t\t\t\tbackground: #aaffff;\r\n\t\t\t\t\t\tcolor: #0055ff;\r\n\t\t\t\t\t\tfont-size: 10px;\r\n\t\t\t\t\t\tpadding: 6rpx 12rpx;\r\n\t\t\t\t\t\tmargin-left: 20rpx;\r\n\t\t\t\t\t\t// padding: 10rpx;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>\n","import mod from \"-!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./identityList.vue?vue&type=style&index=0&id=6047f704&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./identityList.vue?vue&type=style&index=0&id=6047f704&lang=scss&scoped=true&\""],"sourceRoot":""}