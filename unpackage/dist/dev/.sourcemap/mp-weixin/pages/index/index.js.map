{"version":3,"sources":["uni-app:///main.js","webpack:///E:/Users/yu/Documents/HBuilderProjects/GraduationProject/pages/index/index.vue?84d7","webpack:///E:/Users/yu/Documents/HBuilderProjects/GraduationProject/pages/index/index.vue?ecf1","webpack:///E:/Users/yu/Documents/HBuilderProjects/GraduationProject/pages/index/index.vue?b207","webpack:///E:/Users/yu/Documents/HBuilderProjects/GraduationProject/pages/index/index.vue?91a3","uni-app:///pages/index/index.vue","webpack:///E:/Users/yu/Documents/HBuilderProjects/GraduationProject/pages/index/index.vue?0041","webpack:///E:/Users/yu/Documents/HBuilderProjects/GraduationProject/pages/index/index.vue?b632"],"names":["createPage","Page","renderjs","component","options","__file","components","uNavbar","uIcon","uSwiper","uGrid","uGridItem","e","message","indexOf","console","error","render","_vm","this","_h","$createElement","_self","_c","recyclableRender","staticRenderFns","_withStripped"],"mappings":";;;;wEAAA,qBACA,sBACA,yC,mDACAA,EAAWC,a;;;;2DCHX,mWACIC,EADJ,+KAUIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,WACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,wBACZ,aAAAF,E;;;;2GCxBf,irC;;;;2GCAA,IAAIG,EAAJ,0LACA,IACEA,EAAa,CACXC,QAAS,WACP,OAAO,sMAITC,MAAO,WACL,OAAO,0LAITC,QAAS,WACP,OAAO,sMAITC,MAAO,WACL,OAAO,0LAITC,UAAW,WACT,OAAO,yNAKX,MAAOC,GACP,IAC+C,IAA7CA,EAAEC,QAAQC,QAAQ,wBACa,IAA/BF,EAAEC,QAAQC,QAAQ,QAWlB,MAAMF,EATNG,QAAQC,MAAMJ,EAAEC,SAChBE,QAAQC,MAAM,mBACdD,QAAQC,MACN,uFAEFD,QAAQC,MACN,mDAMN,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eACJH,EAAII,MAAMC,IAEjBC,GAAmB,EACnBC,EAAkB,GACtBR,EAAOS,eAAgB,G;;;;2DCrDvB,2xBAAquB,eAAG,G;;;;2MCgFxuB,mB,w8CAMA,CACA,YACA,eACA,WAEA,KALA,WAMA,OACA,UACA,gIAEA,CACA,iIAGA,WACA,UAGA,OAlBA,WAmBA,+BACA,WACA,6BACA,gDACA,mBAGA,oBAEA,eACA,wDAEA,gBACA,yDADA,IAEA,YAFA,WAGA,YACA,wBAGA,cAPA,WAQA,kCAYA,SACA,kBACA,QAFA,SAEA,GACA,qBACA,oBACA,WAEA,KAPA,SAOA,GACA,qBACA,8BAMA,cAnCA,WAmCA,WACA,uCAEA,OADA,eACA,gBACA,mBACA,MACA,uBACA,QACA,cAIA,kBACA,oBACA,oBACA,oBACA,gDACA,gEAEA,aACA,mBACA,iBACA,aACA,cACA,8BAIA,gBA/DA,SA+DA,2IACA,wBACA,sBACA,eAHA,SAIA,6BACA,8BAGA,QACA,6BACA,6BACA,4BACA,2BAEA,kBACA,mBAEA,mBACA,oBACA,0BAnBA,cAqBA,yCACA,wBACA,KACA,cACA,mDACA,QAFA,WAGA,qBAEA,KALA,WAMA,qBAEA,SARA,WASA,uBAIA,cACA,+CACA,QAFA,WAGA,qBAEA,KALA,WAMA,qBAEA,SARA,WASA,uBA9CA,8CAmDA,eAlHA,SAkHA,cAGA,kBACA,gBACA,oBACA,2BAIA,YA5HA,WA4HA,sIACA,+BACA,eAFA,SAGA,iEACA,gDACA,wBAEA,2BACA,2BACA,mBACA,8BACA,mBACA,iCACA,4BACA,gBAEA,mBACA,cAEA,mBACA,kBApBA,8CAwBA,UApJA,WAoJA,sIACA,eADA,SAEA,sFACA,YACA,kBACA,2BACA,6CACA,SADA,2BACA,iBACA,qCACA,aACA,YAEA,aACA,WAGA,aAhBA,8CAoBA,QAxKA,WAyKA,aACA,mBACA,QAFA,WAGA,qBAEA,KALA,WAMA,qBAEA,SARA,WASA,2B;;;;2DCvSA,4lCAAsiC,eAAG,G;;;;;;;;2DCAziC,24CAA81C,eAAG,G","file":"pages/index/index.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/index/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=57280228&scoped=true&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=css&\"\nimport style1 from \"./index.vue?vue&type=style&index=1&id=57280228&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"57280228\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/index/index.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=57280228&scoped=true&\"","var components\ntry {\n  components = {\n    uNavbar: function() {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-navbar/u-navbar\" */ \"uview-ui/components/u-navbar/u-navbar.vue\"\n      )\n    },\n    uIcon: function() {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-icon/u-icon\" */ \"uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n    uSwiper: function() {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-swiper/u-swiper\" */ \"uview-ui/components/u-swiper/u-swiper.vue\"\n      )\n    },\n    uGrid: function() {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-grid/u-grid\" */ \"uview-ui/components/u-grid/u-grid.vue\"\n      )\n    },\n    uGridItem: function() {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-grid-item/u-grid-item\" */ \"uview-ui/components/u-grid-item/u-grid-item.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t<!-- <u-mask :show=\"show\" :mask-click-able=\"false\"> -->\r\n\t\t\t<view v-if=\"show\" class=\"loading\">\r\n\t\t\t\t<Loading text=\"加载中..\" :mask=\"true\" click=\"true\" ref=\"loading\"></Loading>\r\n\t\t\t</view>\r\n\t\t<!-- </u-mask> -->\r\n\t\t<u-navbar :border-bottom=\"false\" :is-back=\"false\">\r\n\t\t\t<view class=\"slot-wrap\">\r\n\t\t\t\t<view hover-class=\"hover\" style=\"border-radius: 50%\">\r\n\t\t\t\t\t<u-icon @click=\"backToIndex\" color=\"#ff9900\" custom-prefix=\"custom-icon\" name=\"shouye\" :size=\"70\">\r\n\t\t\t\t\t</u-icon>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"name\">\r\n\t\t\t\t\t邑班之助\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</u-navbar>\r\n\t\t<view v-if=\"!hasRole\" class=\"content\">\r\n\t\t\t<view class=\"swiperContainer\">\r\n\t\t\t\t<u-swiper :border-radius=\"8\" :height=\"300\" :list=\"imgList\"></u-swiper>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"list\">\r\n\t\t\t\t<u-grid :col=\"4\" :border=\"false\">\r\n\t\t\t\t\t<u-grid-item>\r\n\t\t\t\t\t\t<u-icon name=\"photo\" :size=\"46\"></u-icon>\r\n\t\t\t\t\t\t<view class=\"grid-text\">通知公告</view>\r\n\t\t\t\t\t</u-grid-item>\r\n\t\t\t\t\t<u-grid-item>\r\n\t\t\t\t\t\t<u-icon name=\"lock\" :size=\"46\"></u-icon>\r\n\t\t\t\t\t\t<view class=\"grid-text\">作业</view>\r\n\t\t\t\t\t</u-grid-item>\r\n\t\t\t\t\t<u-grid-item>\r\n\t\t\t\t\t\t<u-icon name=\"hourglass\" :size=\"46\"></u-icon>\r\n\t\t\t\t\t\t<view class=\"grid-text\">打卡</view>\r\n\t\t\t\t\t</u-grid-item>\r\n\t\t\t\t\t<u-grid-item>\r\n\t\t\t\t\t\t<u-icon name=\"photo\" :size=\"46\"></u-icon>\r\n\t\t\t\t\t\t<view class=\"grid-text\">填表接龙</view>\r\n\t\t\t\t\t</u-grid-item>\r\n\t\t\t\t\t<u-grid-item>\r\n\t\t\t\t\t\t<u-icon name=\"lock\" :size=\"46\"></u-icon>\r\n\t\t\t\t\t\t<view class=\"grid-text\">学生请假</view>\r\n\t\t\t\t\t</u-grid-item>\r\n\t\t\t\t\t<u-grid-item>\r\n\t\t\t\t\t\t<u-icon name=\"hourglass\" :size=\"46\"></u-icon>\r\n\t\t\t\t\t\t<view class=\"grid-text\">私密成绩</view>\r\n\t\t\t\t\t</u-grid-item>\r\n\t\t\t\t\t<u-grid-item>\r\n\t\t\t\t\t\t<u-icon name=\"photo\" :size=\"46\"></u-icon>\r\n\t\t\t\t\t\t<view class=\"grid-text\">班级缴费</view>\r\n\t\t\t\t\t</u-grid-item>\r\n\t\t\t\t\t<u-grid-item>\r\n\t\t\t\t\t\t<u-icon name=\"lock\" :size=\"46\"></u-icon>\r\n\t\t\t\t\t\t<view class=\"grid-text\">班级相册</view>\r\n\t\t\t\t\t</u-grid-item>\r\n\t\t\t\t</u-grid>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"choose\">\r\n\t\t\t\t<view class=\"btn\" @click=\"getUserProfile(0)\">\r\n\t\t\t\t\t<view class=\"test1\">\r\n\t\t\t\t\t\t<view class=\"option-box\">创建我的班级</view>\r\n\t\t\t\t\t\t<view class=\"option-box2\">班导师/辅导员</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"btn\" @click=\"getUserProfile(1)\">\r\n\t\t\t\t\t<view class=\"test2\">\r\n\t\t\t\t\t\t<view class=\"option-box\">加入我的班级</view>\r\n\t\t\t\t\t\t<view class=\"option-box2\">学生</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view v-if=\"hasRole\" class=\"list-box\">\r\n\t\t\t<idenfity-list></idenfity-list>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tmapState,\r\n\t\tmapMutations\r\n\t} from 'vuex'\r\n\timport idenfityList from \"@/components/identityList/identityList.vue\";\r\n\timport Loading from \"@/components/loading.vue\";\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tidenfityList,\r\n\t\t\tLoading\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\timgList: [{\r\n\t\t\t\t\t\timage: 'https://vkceyugu.cdn.bspapp.com/VKCEYUGU-d0864766-02e5-4b10-8e08-72e0af293546/6e0dffdf-9011-47eb-8f14-74378866dec9.jpg'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\timage: 'https://vkceyugu.cdn.bspapp.com/VKCEYUGU-d0864766-02e5-4b10-8e08-72e0af293546/6e0dffdf-9011-47eb-8f14-74378866dec9.jpg'\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\thasRole: false,\r\n\t\t\t\tshow: true\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\tconsole.log(\"index onLoad...\")\r\n\t\t\tvar _this = this\r\n\t\t\tuni.$once('login', function(data) {\r\n\t\t\t\tconsole.log('监听到事件来自 login ，携带参数 msg 为：' + data.msg);\r\n\t\t\t\t_this.getUserInfo()\r\n\t\t\t})\r\n\t\t\t// this.show=false\r\n\t\t\tthis.getUserInfo()\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t...mapState(['uid', 'hasLogin', 'userInfo', 'hasAuth'])\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t...mapMutations([\"setID\", \"login\", \"logout\", \"getAuth\"]),\r\n\t\t\tbackToIndex() {\r\n\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\turl: '../index/index'\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tgetWeixinCode() {\r\n\t\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\t\tweixinAuthService.authorize(function(res) {\r\n\t\t\t\t\t\tconsole.log(\"47行成功\")\r\n\t\t\t\t\t\tresolve(res.code)\r\n\t\t\t\t\t}, function(err) {\r\n\t\t\t\t\t\tconsole.log(err)\r\n\t\t\t\t\t\tconsole.log(\"51行失败\")\r\n\t\t\t\t\t\treject(new Error('微信登录失败!!!'))\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// #endif\r\n\t\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\t\tuni.login({\r\n\t\t\t\t\t\tprovider: 'weixin',\r\n\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\tconsole.log(\"59行成功\")\r\n\t\t\t\t\t\t\tconsole.log(res.code)\r\n\t\t\t\t\t\t\tresolve(res.code)\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail(err) {\r\n\t\t\t\t\t\t\tconsole.log(\"63行失败\")\r\n\t\t\t\t\t\t\treject(new Error('微信登录失败'))\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t// #endif\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tloginByWeixin() {\r\n\t\t\t\tthis.getWeixinCode().then((code) => {\r\n\t\t\t\t\tconsole.log(code)\r\n\t\t\t\t\treturn uniCloud.callFunction({\r\n\t\t\t\t\t\tname: 'user-center',\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\taction: 'loginByWeixin',\r\n\t\t\t\t\t\t\tparams: {\r\n\t\t\t\t\t\t\t\tcode,\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}).then((res) => {\r\n\t\t\t\t\tconsole.log(\"登录成功\")\r\n\t\t\t\t\tif (res.result.code === 0) {\r\n\t\t\t\t\t\tconsole.log(\"首次登录\")\r\n\t\t\t\t\t\tuni.setStorageSync('uni_id_token', res.result.token)\r\n\t\t\t\t\t\tuni.setStorageSync('uni_id_token_expired', res.result.tokenExpired)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.login();\r\n\t\t\t\t}).catch((e) => {\r\n\t\t\t\t\tconsole.error(e)\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\tshowCancel: false,\r\n\t\t\t\t\t\tcontent: '微信登录失败，请稍后再试2'\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tasync userInfoHandler(res, e) {\r\n\t\t\t\tconsole.log(res.userInfo)\r\n\t\t\t\tthis.getAuth(res.userInfo)\r\n\t\t\t\tconst db = uniCloud.database() //代码块为cdb\r\n\t\t\t\tlet result = await db.collection('uni-id-users')\r\n\t\t\t\t\t.where('_id == $cloudEnv_uid')\r\n\t\t\t\t\t// .where('nickname == \"hwy\"')\r\n\t\t\t\t\t// .field('_id')\r\n\t\t\t\t\t.update({\r\n\t\t\t\t\t\tusername:res.userInfo.nickName,\r\n\t\t\t\t\t\tnickname: res.userInfo.nickName,\r\n\t\t\t\t\t\tavatar: res.userInfo.avatarUrl,\r\n\t\t\t\t\t\tgender: res.userInfo.gender\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then((res => {\r\n\t\t\t\t\t\tthis.getUserInfo()\r\n\t\t\t\t\t}))\r\n\t\t\t\t\t.catch((err) => {\r\n\t\t\t\t\t\tconsole.log(err.code); // 打印错误码\r\n\t\t\t\t\t\tconsole.log(err.message); // 打印错误内容\r\n\t\t\t\t\t})\r\n\t\t\t\tconsole.log(\"用户名为：\" + res.userInfo.nickName)\r\n\t\t\t\tconsole.log(this.userInfo)\r\n\t\t\t\tif (e == 0) {\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: '../../packageB/pages/createClass/createClass',\r\n\t\t\t\t\t\tsuccess() {\r\n\t\t\t\t\t\t\tconsole.log(\"跳转成功\")\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail() {\r\n\t\t\t\t\t\t\tconsole.log(\"跳转失败\")\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcomplete() {\r\n\t\t\t\t\t\t\tconsole.log(\"跳转完成\")\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: '../../packageB/pages/joinClass/joinClass',\r\n\t\t\t\t\t\tsuccess() {\r\n\t\t\t\t\t\t\tconsole.log(\"跳转成功\")\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail() {\r\n\t\t\t\t\t\t\tconsole.log(\"跳转失败\")\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcomplete() {\r\n\t\t\t\t\t\t\tconsole.log(\"跳转完成\")\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgetUserProfile(e) {\r\n\t\t\t\t// 推荐使用wx.getUserProfile获取用户信息，开发者每次通过该接口获取用户个人信息均需用户确认\r\n\t\t\t\t// 开发者妥善保管用户快速填写的头像昵称，避免重复弹窗\r\n\t\t\t\tuni.getUserProfile({\r\n\t\t\t\t\tdesc: '用于完善会员资料', // 声明获取用户个人信息后的用途，后续会展示在弹窗中，请谨慎填写\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tthis.userInfoHandler(res, e)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tasync getUserInfo() {\r\n\t\t\t\tconsole.log(\"正在执行getUserInfo\")\r\n\t\t\t\tconst db = uniCloud.database()\r\n\t\t\t\tawait db.collection('uni-id-users').where('_id == $cloudEnv_uid').field(\r\n\t\t\t\t\t'avatar,gender,nickname,username,joined_class'\r\n\t\t\t\t).get().then((res) => {\r\n\t\t\t\t\t// res 为数据库查询结果\r\n\t\t\t\t\tconsole.log(res.result.data)\r\n\t\t\t\t\tif (res.result.data[0].nickname) {\r\n\t\t\t\t\t\tconsole.log(\"已授权\")\r\n\t\t\t\t\t\tthis.setID(res.result.data[0]._id)\r\n\t\t\t\t\t\tconsole.log(this.uid)\r\n\t\t\t\t\t\tuni.setStorageSync('uni_id', this.uid)\r\n\t\t\t\t\t\tthis.getAuth(res.result.data[0])\r\n\t\t\t\t\t\tthis.checkRole()\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log(\"未授权\")\r\n\t\t\t\t\t\tthis.show = false\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch((err) => {\r\n\t\t\t\t\tconsole.log(err)\r\n\t\t\t\t\t// this.getUserInfo()\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tasync checkRole() {\r\n\t\t\t\tconst db = uniCloud.database()\r\n\t\t\t\tawait db.collection('uni-id-users').where('_id == $cloudEnv_uid').field('joined_class').get({\r\n\t\t\t\t\tgetOne: true\r\n\t\t\t\t}).then((res) => {\r\n\t\t\t\t\tconsole.log(res.result.data)\r\n\t\t\t\t\tif ((typeof res.result.data.joined_class == \"object\") && (res.result.data.joined_class\r\n\t\t\t\t\t\t\t.constructor.name == 'Array')) {\r\n\t\t\t\t\t\tif (res.result.data.joined_class.length > 0) {\r\n\t\t\t\t\t\t\tthis.hasRole = true\r\n\t\t\t\t\t\t\tthis.show = false\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.hasRole = false\r\n\t\t\t\t\t\t\tthis.show = false\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.show=false\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgoIndex() {\r\n\t\t\t\tuni.switchTab({\r\n\t\t\t\t\turl: '../home/home',\r\n\t\t\t\t\tsuccess() {\r\n\t\t\t\t\t\tconsole.log(\"跳转成功\")\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail() {\r\n\t\t\t\t\t\tconsole.log(\"跳转失败\")\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcomplete() {\r\n\t\t\t\t\t\tconsole.log(\"跳转完成\")\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t/* #ifndef H5 */\r\n\tpage {\r\n\t\theight: 100%;\r\n\t\tbackground-color: #f7f8fa;\r\n\t}\r\n\r\n\t/* #endif */\r\n</style>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t.loading {\r\n\t\tposition: fixed;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\theight: 150rpx;\r\n\t\twidth: 150rpx;\r\n\t\tleft: 50%;\r\n\t\ttop: 50%;\r\n\t\tmargin-top: -75rpx;\r\n\t\tmargin-left: -75rpx;\r\n\t\tborder: 1px solid rgba(255, 255, 255, 0.1);\r\n\t\tborder-radius: 10upx;\r\n\t\tbackground: #040038;\r\n\t\tz-index: 999;\r\n\t}\r\n\r\n\t.content {\r\n\t\tmargin: 0;\r\n\t\tpadding: 0;\r\n\t}\r\n\r\n\t.warp {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.bg-set {\r\n\t\tposition: fixed;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\tz-index: -1;\r\n\t}\r\n\r\n\t.btn {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tjustify-content: center;\r\n\t\tborder-radius: 12rpx;\r\n\t\tcolor: #FFFFFF;\r\n\t\tborder: none;\r\n\t\ttext-align: center;\r\n\t\tpadding: 70rpx 20rpx;\r\n\t}\r\n\r\n\t.box {\r\n\t\tposition: relative;\r\n\t\tdisplay: flex;\r\n\t\theight: 350upx;\r\n\t\tborder: 1px solid rgba(255, 255, 255, 0.1);\r\n\t\tborder-radius: 10upx;\r\n\t\tmargin-top: 30upx;\r\n\t\tflex: 0 0 350upx;\r\n\t\tbackground: #040038;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t.list-box {\r\n\t\tmargin-top: 30rpx;\r\n\t}\r\n\r\n\t.swiperContainer {\r\n\t\tpadding: 30rpx;\r\n\t}\r\n\r\n\t.test1 {\r\n\t\tposition: relative;\r\n\t\tborder-radius: 12rpx;\r\n\t\tbackground: linear-gradient(90deg, #ffc700 0%, #e91e1e 33%, #6f27b0 66%, #00ff88 100%);\r\n\t\tbackground-position: 100% 0;\r\n\t\tanimation: bgSize 5s infinite ease-in-out alternate;\r\n\t}\r\n\r\n\t.test2 {\r\n\t\tposition: relative;\r\n\t\tborder-radius: 12rpx;\r\n\t\tbackground: linear-gradient(90deg, #e50000 0%, #b83d00 33%, #ff5500 66%, #ffaa00 100%);\r\n\t\tbackground-position: 100% 0;\r\n\t\tanimation: bgSize 5s infinite ease-in-out alternate;\r\n\t}\r\n\r\n\t@keyframes bgSize {\r\n\t\t0% {\r\n\t\t\tbackground-size: 300% 100%;\r\n\t\t}\r\n\r\n\t\t100% {\r\n\t\t\tbackground-size: 100% 100%;\r\n\t\t}\r\n\t}\r\n\r\n\t.grid-text {\r\n\t\tfont-size: 28rpx;\r\n\t\tmargin-top: 4rpx;\r\n\t\tcolor: $u-type-info;\r\n\t}\r\n\r\n\t.list {\r\n\t\twidth: 100%;\r\n\t\tmargin-top: 20rpx;\r\n\t}\r\n\r\n\t.choose {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\tpadding: 40rpx;\r\n\t\tmargin-top: 20rpx;\r\n\t}\r\n\r\n\r\n\t.option-box {\r\n\t\tmargin: 20rpx;\r\n\t\tpadding: 30rpx;\r\n\t\tfont-size: 40rpx;\r\n\t\tpadding: 8rpx;\r\n\t\tline-height: 20px;\r\n\t}\r\n\r\n\t.option-box2 {\r\n\t\tfont-size: 26rpx;\r\n\t\tpadding: 20rpx;\r\n\t\tline-height: 20px;\r\n\t\tpadding-top: 10rpx;\r\n\t}\r\n\r\n\t.slot-wrap {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\t/* 如果您想让slot内容占满整个导航栏的宽度 */\r\n\t\t/* flex: 1; */\r\n\t\t/* 如果您想让slot内容与导航栏左右有空隙 */\r\n\t\tpadding: 0 30rpx;\r\n\t}\r\n\r\n\t.name {\r\n\t\tmargin-left: 15rpx;\r\n\t\tfont-size: 18px;\r\n\t\t// font-weight: bold;\r\n\t\t// line-height: 1;\r\n\t}\r\n</style>\n","import mod from \"-!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=1&id=57280228&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=1&id=57280228&lang=scss&scoped=true&\""],"sourceRoot":""}